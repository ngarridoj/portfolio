<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous"> 
    <script src="https://kit.fontawesome.com/efbe4d12a8.js" crossorigin="anonymous" defer></script>

    <title>Contraseña Aleatoria</title>

</head>
<body>
    <div class="container">
        <label for="pass" class="form-label mt-4">Contraseña:</label>
        <div class="field input-group flex-nowrap">
            <input type="text" id="pass" class="form-control">
            <span class="input-group-text cursor-pointer"><i class="fa-solid fa-eye"></i></span>
        </div>

        <button class="btn btn-primary mt-3 btn-pass">Generar contraseña</button>
        <button class="btn btn-outline-warning mt-3 copiar">Copiar</button>
    </div>
    
    <!-- Un botón dentro de un formulario, si es de tipo button, no envía el formulario actua como boton normal  -->
    <script>
        const pass = document.querySelector('#pass')
        const btn = document.querySelector('.btn-pass')
        const ojoSpan = document.querySelector('.field span')
        const ojo = document.querySelector('.field span i')

        const btnCopy = document.querySelector('.copiar')

        btnCopy.addEventListener('click', () => {
            navigator.clipboard.writeText(pass.value)
        })

        ojoSpan.addEventListener('click', () => {

            if(pass.getAttribute('type') == 'text'){
                pass.setAttribute('type', 'password')
                ojo.setAttribute('class','fa-solid fa-eye-slash')

            } else {
                pass.setAttribute('type', 'text')
                ojo.setAttribute('class','fa-solid fa-eye')
            }

        })
  
    // const numeros = Number(Math.floor(Math.random()*10)) // floor redondea hacia abajo, round redondea hacia arriba.
        
        const letras = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z'];
        const simbolos = ['!', '@', '#', '$', '%', '^', '&', '*', '(', ')', '-', '_', '=', '+', '{', '}', '[', ']', ':', ';', '"', "'", '<', '>', ',', '.', '?', '/', '~'];

        let passGenerada = []

    btn.addEventListener('click', ()=>{
        passGenerada = []

        let numero = Math.floor(Math.random()*10)

        let indexMinus = Math.floor(Math.random()* letras.length) // Con el redondeo hacia abajo se incluye el 0, que es el primer elemento de un array.

        let indexMayus = Math.floor(Math.random()* letras.length)

        let indexSimbol = Math.floor(Math.random()* simbolos.length)

        passGenerada.push(numero)
        passGenerada.push(letras[indexMinus])
        passGenerada.push(letras[indexMayus].toUpperCase())
        passGenerada.push(simbolos[indexSimbol])

        //generar un numero aleatoria para elegir de que grupo coje el dato y luego el dato en sí de determinado array que coje. Y una vez tenga todo, desordenar los elementos del array passGenerada.

        let i = 0
        for (i = 0; i<12 ;i++){
            const aleatorio = Math.floor(Math.random()*4) //Entre 0 y 3 para elegir la opción.
            
            switch(aleatorio){
                case 0:
                indexMinus = Math.floor(Math.random() * letras.length)
                passGenerada.push(letras[indexMinus])

                break;
                case 1:
                indexMayus = Math.floor(Math.random() * letras.length)
                passGenerada.push(letras[indexMayus].toUpperCase())

                break;
                case 2:
                indexSimbol = Math.floor(Math.random() * simbolos.length)
                passGenerada.push(simbolos[indexSimbol])

                break;
                case 3:
                numero = Math.floor(Math.random() * 10)
                passGenerada.push(numero)

                break;
            }           
        }
    passGenerada.sort(() => Math.random() - 0.5)
    passGenerada = passGenerada.join('')
    pass.value = passGenerada
    })

    </script>
</body>
</html>